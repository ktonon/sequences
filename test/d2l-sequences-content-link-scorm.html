<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">
	<title>d2l-sequences-content-link test</title>
	<script src="../../@webcomponents/webcomponentsjs/webcomponents-loader.js"></script>
	<script src="../../wct-browser-legacy/browser.js"></script>
	<script src="../node_modules/chai-dom/chai-dom.js"></script>
</head>
<body>
<test-fixture id="LinkFixture">
	<template>
		<d2l-sequences-content-link-scorm href="data/activity-link-scorm.json" token="asdf"></d2l-sequences-content-link-scorm>
	</template>
</test-fixture>
<script type="module">
import { D2LSequencesContentLinkScorm } from '../components/d2l-sequences-content-link-scorm.js';
import SirenFixture from 'polymer-siren-test-helpers';

describe('d2l-sequences-content-link-scorm', () => {
	before(() => {
		// skip completion tracking, preventing extraneous HTTP requests
		D2LSequencesContentLinkScorm.prototype._skipCompletion = true;
	});

	it('should have the correct onclick function', async() => {
		const element = await SirenFixture('data/activity-link-scorm.json', fixture('LinkFixture'));
		const button = element.shadowRoot.querySelector('d2l-button');
		expect(button).to.exist;
		expect(button).to.have.attribute('onclick', 'window.open(\'https://example.bspc.com/d2l/le/content/contentservice/Forward/00000000-0000-0000-000000000000?linkId=1354&ou=%7BorgUnitId%7D\')');
	});

	it('should have the correct onclick function', async() => {
		const element = await SirenFixture('data/activity-link-scorm-2004.json', fixture('LinkFixture'));
		const button = element.shadowRoot.querySelector('d2l-button');
		expect(button).to.exist;
		expect(button).to.have.attribute('onclick', 'window.open(\'https://example.bspc.com/d2l/le/content/contentservice/Forward/00000000-0000-0000-000000000000?linkId=1354&ou=%7BorgUnitId%7D\')');
	});

	it('should have the correct onclick function', async() => {
		const element = await SirenFixture('data/activity-link-scorm-1-2.json', fixture('LinkFixture'));
		const button = element.shadowRoot.querySelector('d2l-button');
		expect(button).to.exist;
		expect(button).to.have.attribute('onclick', 'window.open(\'https://example.bspc.com/d2l/le/content/contentservice/Forward/00000000-0000-0000-000000000000?linkId=1354&ou=%7BorgUnitId%7D\')');
	});
});
</script>
</body>
</html>
